<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Panel Power BI - Acceso Privado</title>
  <style>
    /* -------------------------
       Layout base y fondo
       ------------------------- */
    body {
      font-family: "Segoe UI", Arial, sans-serif;
      background-image: url('https://media.bio.site/sites/a7cf8165-3ba2-478a-8108-f98fac889c65/iX4kWJuDwXhgEBQ3a7GEHg.jpg');
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
      margin: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      color: #333;
    }

    /* Cuando mostramos #menu o #dashboard, usamos esta clase para
       alinear hacia arriba y permitir crecimiento/scroll vertical.
       Evita que el t√≠tulo se "corte" al hacer zoom o en pantallas peque√±as. */
    body.top-align {
      align-items: flex-start;
      justify-content: flex-start;
      padding-top: 5px;
      height: auto;
      min-height: 100vh;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.96); }
      to { opacity: 1; transform: scale(1); }
    }

    /* CARD (login) - fondo difuminado */
    .card {
      background: rgba(255, 255, 255, 0.93);
      backdrop-filter: blur(4px);
      border-radius: 15px;
      box-shadow: 0 0 15px rgba(0,0,0,0.3);
      padding: 30px;
      text-align: center;
      animation: fadeIn 0.6s ease-in-out;
      width: 320px;
      box-sizing: border-box;
    }

    /* Centrar verticalmente el login (cuando volvemos) */
    #login.center-vert {
      margin: auto;
    }

    /* Espec√≠fico: t√≠tulo dentro del login */
    #login h2 {
      color: #D9B300;            /* color dorado para "Acceso Privado" */
      text-align: center;
      font-size: 28px;
      font-weight: 700;
      margin: 0 0 12px 0;
      letter-spacing: 0.6px;
    }

    /* Quitamos fondo blanco del contenedor general (#menu y #dashboard)
       y permitimos scroll si el contenido es mayor que la ventana */
    #menu, #dashboard {
      display: none;
      width: 95%;
      max-width: 1650px;
      background: none !important; /* sin bloque blanco */
      box-shadow: none !important;
      padding: 10px 20px;
      margin: 0 auto;
      box-sizing: border-box;
      overflow: auto; /* importante: permite scroll si es necesario */
    }

    input {
      width: 90%;
      padding: 10px;
      margin: 8px 0;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 1em;
      box-sizing: border-box;
    }

    button {
      background: #D9B300;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
      transition: 0.2s;
    }

    button:hover {
      background: #b89c00;
      transform: scale(1.02);
    }

    /* -------------------------
       T√≠tulo principal del men√∫
       (responsive: tama√±o adaptable, permite salto de l√≠nea)
       ------------------------- */
    #menu h2 {
      text-align: center;
      margin-bottom: 18px;
      color: #ffffff; /* Blanco */
      font-size: clamp(18px, 3.6vw, 36px); /* adaptable: min 18px, max 36px */
      font-weight: 800;
      text-shadow: 0 0 10px rgba(0,0,0,0.7); /* efecto brillo/sombra */
      line-height: 1.05;
      word-wrap: break-word;
      white-space: normal; /* permitir wrapping */
      position: relative;
      z-index: 5; /* mantener por encima de otros elementos */
      padding: 4px 8px;
    }

    /* L√≠nea amarilla decorativa debajo del t√≠tulo */
    #menu h2::after {
      content: "";
      display: block;
      width: 140px;
      height: 4px;
      background-color: #D9B300;
      margin: 10px auto 0;
      border-radius: 2px;
    }

    /* Separaci√≥n y grid de tarjetas */
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 22px; /* mayor separaci√≥n del t√≠tulo para evitar solapamientos */
    }

    /* Tarjetas individuales (estas s√≠ conservan fondo blanco) */
    .tile {
      background: rgba(255,255,255,0.98);
      border-radius: 12px;
      padding: 24px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.25);
      transition: transform 0.18s, box-shadow 0.18s;
      cursor: pointer;
      min-height: 120px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      position: relative;
      z-index: 1;
      box-sizing: border-box;
    }

    .tile h3 {
      color: #D9B300; /* t√≠tulo de cada tarjeta */
      margin: 0 0 8px 0;
      font-size: 18px;
      font-weight: 700;
    }

    .tile p {
      margin: 0;
      color: #333;
    }

    .tile:hover {
      transform: translateY(-6px);
      box-shadow: 0 12px 30px rgba(0,0,0,0.35);
      background: #fffbe6;
    }

    /* Iframe: ocupa ancho completo del contenedor y permite ajuste en altura.
       A√±adimos max-height para evitar cubrir todo y permitimos scroll del contenedor padre. */
    iframe {
      width: 100%;
      height: 70vh;
      border: none;
      border-radius: 12px;
      box-shadow: 0 0 8px rgba(0,0,0,0.2);
      display: block;
      position: relative;
      z-index: 1;
      box-sizing: border-box;
    }

    .back-btn {
      background: #555;
      margin-top: 5px;
      color: #fff;
      padding: 8px 14px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
    }

    .back-btn:hover { background: #333; }

    /* Peque√±os ajustes responsive */
    @media (max-width: 600px) {
      .card { width: 92%; padding: 20px; }
      #menu h2::after { width: 100px; }
      iframe { height: 70vh; }
      .grid { gap: 12px; }
    }
  </style>
</head>
<body>

  <!-- LOGIN -->
  <div id="login" class="card center-vert">
    <h2>Acceso Privado</h2>
    <p>Ingrese sus credenciales</p>
    <input type="text" id="usuario" placeholder="Usuario">
    <input type="password" id="clave" placeholder="Contrase√±a">
    <br><br>
    <button onclick="acceder()">Ingresar</button>
    <p id="error" style="color:red; display:none; margin-top:10px;">Usuario o contrase√±a incorrectos</p>
  </div>

  <!-- MEN√ö PRINCIPAL -->
  <div id="menu" aria-hidden="true">
    <h2>Panel de Dashboards | √Årea Comercial</h2>
    <div class="grid"></div>
  </div>

  <!-- DASHBOARD -->
  <div id="dashboard" aria-hidden="true">
    <iframe id="iframe" title="Power BI Dashboard"></iframe>
    <br>
    <button class="back-btn" onclick="volverMenu()">‚¨Ö Volver al men√∫</button>
  </div>

  <script>
    // decodificar base64 (links)
    function decodificar(texto) { 
      try { return atob(texto); } catch(e) { return ""; }
    }
    // codificar base64 (para comparar inputs con los valores guardados)
    function codificar(texto) { return btoa(texto); }

    // --- USUARIOS Y CONTRASE√ëAS (ALMACENADOS EN BASE64) ---
    // Formato: { u: "<usuario_en_base64>", p: "<password_en_base64>", rol: "..." }
    const usuariosCifrados = [
      { u: "QW5uaWVTc2VuZGEyMDI1", p: "QUMyNUNPTUVSQ0lBTA==", rol: "AnnieSsenda2025" },
      { u: "RnJlZGR5U3NlbmRhMjAyNQ==", p: "RlIyNUNPTUVSQ0lBTA==", rol: "FreddySsenda2025" },
      { u: "RW5yaXF1ZVNzZW5kYTIwMjU=", p: "RVIyNUNPTUVSQ0lBTA==", rol: "EnriqueSsenda2025" },
      { u: "UGF0cmljaWFTc2VuZGEyMDI1", p: "UEcyMDI1Q09NRVJDSUFM", rol: "PatriciaSsenda2025" },
      { u: "RGFuaWVsU3NlbmRhMjAyNQ==", p: "REEyNUNPTUVSQ0lBTA==", rol: "DanielSsenda2025" }
    ];

    // --- DASHBOARDS CIFRADOS (por rol) ---
    const dashboardsPorRol = {
      AnnieSsenda2025: [
        { t: "üü® Analisis de Ventas - Report", d: "Resumen de ventas y an√°lisis (facturado)", l: "aHR0cHM6Ly9hcHAucG93ZXJiaS5jb20vdmlldz9yPWV5SnJJam9pWVRoaU4yTXdOekl0TUdNMk55MDBZV05qTFRobE16RXROVFJtWm1Fell6TXdNbVkxSWl3aWRDSTZJamt6TmpReFlqTm1MV1U1Tm1NdE5EazBPQzA0WkRJd0xUVmtNVFF6WlRaaVkyTmhPQ0o5" },
        { t: "üü® Analisis de Ventas - Toma Pedido", d: "Deteccion de estado de pedidos", l: "aHR0cHM6Ly9hcHAucG93ZXJiaS5jb20vdmlldz9yPWV5SnJJam9pT0dNd01tVTRPVGN0TURSbE1TMDBNVFprTFdJNVlURXRNbUZtTm1FNVl6QmtOVGRtSWl3aWRDSTZJamt6TmpReFlqTm1MV1U1Tm1NdE5EazBPQzA0WkRJd0xUVmtNVFF6WlRaaVkyTmhPQ0o5JnBhZ2VOYW1lPWFjY2RlNGIxZTkyNDEzYjU4Mzli" },
        { t: "üü® Control de Orden de Compra y Stock", d: "Seguimiento de OC y stock de veh√≠culos", l: "aHR0cHM6Ly9hcHAucG93ZXJiaS5jb20vdmlldz9yPWV5SnJJam9pTldNd09ETXdOR1F0WmpFMU9TMDBPR0UzTFRrNFltSXRaakZsTWpJeE1EaGpOMk5rSWl3aWRDSTZJamt6TmpReFlqTm1MV1U1Tm1NdE5EazBPQzA0WkRJd0xUVmtNVFF6WlRaaVkyTmhPQ0o5" },
        { t: "üü® Analisis de Clientes", d: "Informe de compras de clientes", l: "aHR0cHM6Ly9hcHAucG93ZXJiaS5jb20vdmlldz9yPWV5SnJJam9pTkRVMVpXSTVPVFl0TVRnMlpTMDBNVGMxTFRsaVlqSXRPREJsTjJJMk1qRTVNMkl3SWl3aWRDSTZJamt6TmpReFlqTm1MV1U1Tm1NdE5EazBPQzA0WkRJd0xUVmtNVFF6WlRaaVkyTmhPQ0o5JnBhZ2VOYW1lPTBhYzlmZGUyYmU4NzAwYzVhYjIz" },
        { t: "üü® Analisis AAP", d: "Analisis de inmatriculaciones de la Asociacion Automotriz del Peru", l: "aHR0cHM6Ly9hcHAucG93ZXJiaS5jb20vdmlldz9yPWV5SnJJam9pTnpZNE5ESXpZMll0T0RBNFlTMDBORGt3TFRrME1tRXRORGsyWlRobVpEVTROMlEzSWl3aWRDSTZJamt6TmpReFlqTm1MV1U1Tm1NdE5EazBPQzA0WkRJd0xUVmtNVFF6WlRaaVkyTmhPQ0o5JnBhZ2VOYW1lPWQ4MDkwNTAzMDc0MmU0MDYxZWNh" },
        { t: "üü® Analisis de ventas por Tienda", d: "Avance de ventas de Tiendas Propias", l: "aHR0cHM6Ly9hcHAucG93ZXJiaS5jb20vdmlldz9yPWV5SnJJam9pTm1FMVpEaGpaVE10TkRBMk9TMDBOak16TFRsbE1ESXROalJrWVdRM01qZGhNalV5SWl3aWRDSTZJamt6TmpReFlqTm1MV1U1Tm1NdE5EazBPQzA0WkRJd0xUVmtNVFF6WlRaaVkyTmhPQ0o5JnBhZ2VOYW1lPTY1ODVkZTI5Mjg2OTg3NWY0ODNl" },
        { t: "üü® Analisis de Comparativo de Precios", d: "VS de precios mes a mes", l: "aHR0cHM6Ly9hcHAucG93ZXJiaS5jb20vdmlldz9yPWV5SnJJam9pT1RjNU56VmxNbUV0TURReU5pMDBZalUzTFRobFltUXROamMwTnpjMU16UTVObUptSWl3aWRDSTZJamt6TmpReFlqTm1MV1U1Tm1NdE5EazBPQzA0WkRJd0xUVmtNVFF6WlRaaVkyTmhPQ0o5" },
        { t: "üèóÔ∏è En construccion...", d: "Siempre se puede mejorar", l: "" }
      ],
      FreddySsenda2025: [
        { t: "üü® Analisis de Ventas - Report", d: "Resumen de ventas y an√°lisis (facturado)", l: "aHR0cHM6Ly9hcHAucG93ZXJiaS5jb20vdmlldz9yPWV5SnJJam9pWVRoaU4yTXdOekl0TUdNMk55MDBZV05qTFRobE16RXROVFJtWm1Fell6TXdNbVkxSWl3aWRDSTZJamt6TmpReFlqTm1MV1U1Tm1NdE5EazBPQzA0WkRJd0xUVmtNVFF6WlRaaVkyTmhPQ0o5" },
        { t: "üü® Analisis de Clientes", d: "Informe de compras de clientes", l: "aHR0cHM6Ly9hcHAucG93ZXJiaS5jb20vdmlldz9yPWV5SnJJam9pTkRVMVpXSTVPVFl0TVRnMlpTMDBNVGMxTFRsaVlqSXRPREJsTjJJMk1qRTVNMkl3SWl3aWRDSTZJamt6TmpReFlqTm1MV1U1Tm1NdE5EazBPQzA0WkRJd0xUVmtNVFF6WlRaaVkyTmhPQ0o5JnBhZ2VOYW1lPTBhYzlmZGUyYmU4NzAwYzVhYjIz" },
        { t: "üü® Analisis AAP", d: "Analisis de inmatriculaciones de la Asociacion Automotriz del Peru", l: "aHR0cHM6Ly9hcHAucG93ZXJiaS5jb20vdmlldz9yPWV5SnJJam9pTnpZNE5ESXpZMll0T0RBNFlTMDBORGt3TFRrME1tRXRORGsyWlRobVpEVTROMlEzSWl3aWRDSTZJamt6TmpReFlqTm1MV1U1Tm1NdE5EazBPQzA0WkRJd0xUVmtNVFF6WlRaaVkyTmhPQ0o5JnBhZ2VOYW1lPWQ4MDkwNTAzMDc0MmU0MDYxZWNh" },
        { t: "üü® Analisis de ventas por Tienda", d: "Avance de ventas de Tiendas Propias", l: "aHR0cHM6Ly9hcHAucG93ZXJiaS5jb20vdmlldz9yPWV5SnJJam9pTm1FMVpEaGpaVE10TkRBMk9TMDBOak16TFRsbE1ESXROalJrWVdRM01qZGhNalV5SWl3aWRDSTZJamt6TmpReFlqTm1MV1U1Tm1NdE5EazBPQzA0WkRJd0xUVmtNVFF6WlRaaVkyTmhPQ0o5JnBhZ2VOYW1lPTY1ODVkZTI5Mjg2OTg3NWY0ODNl" },
        { t: "üü® Analisis de Comparativo de Precios", d: "VS de precios mes a mes", l: "aHR0cHM6Ly9hcHAucG93ZXJiaS5jb20vdmlldz9yPWV5SnJJam9pT1RjNU56VmxNbUV0TURReU5pMDBZalUzTFRobFltUXROamMwTnpjMU16UTVObUptSWl3aWRDSTZJamt6TmpReFlqTm1MV1U1Tm1NdE5EazBPQzA0WkRJd0xUVmtNVFF6WlRaaVkyTmhPQ0o5" },
        { t: "üèóÔ∏è En construccion...", d: "Siempre se puede mejorar", l: "" }
      ],
      EnriqueSsenda2025: [
        { t: "üü® Informe de AAP", d: "Analisis de inmatriculaciones de la Asociacion Automotriz del Peru", l: "aHR0cHM6Ly9hcHAucG93ZXJiaS5jb20vdmlldz9yPWV5SnJJam9pTnpZNE5ESXpZMll0T0RBNFlTMDBORGt3TFRrME1tRXRORGsyWlRobVpEVTROMlEzSWl3aWRDSTZJamt6TmpReFlqTm1MV1U1Tm1NdE5EazBPQzA0WkRJd0xUVmtNVFF6WlRaaVkyTmhPQ0o5" },
        { t: "üü® Comisiones", d: "Comsion de Vendedores", l: "aHR0cHM6Ly9hcHAucG93ZXJiaS5jb20vdmlldz9yPWV5SnJJam9pWVRrek9ERTRPR1F0TXpGaFpTMDBabVUxTFRobVpqVXRPR013WW1abU56YzFNV0pqSWl3aWRDSTZJamt6TmpReFlqTm1MV1U1Tm1NdE5EazBPQzA0WkRJd0xUVmtNVFF6WlRaaVkyTmhPQ0o5JnBhZ2VOYW1lPWJkM2I2NjI0ZDVlZDBkOTNmZTQy" },
        { t: "üèóÔ∏è En construccion...", d: "Siempre se puede mejorar", l: "" }
      ],
      PatriciaSsenda2025: [
        { t: "üü® Control de Orden de Compra y Stock", d: "Seguimiento de OC y stock de veh√≠culos", l: "aHR0cHM6Ly9hcHAucG93ZXJiaS5jb20vdmlldz9yPWV5SnJJam9pTldNd09ETXdOR1F0WmpFMU9TMDBPR0UzTFRrNFltSXRaakZsTWpJeE1EaGpOMk5rSWl3aWRDSTZJamt6TmpReFlqTm1MV1U1Tm1NdE5EazBPQzA0WkRJd0xUVmtNVFF6WlRaaVkyTmhPQ0o5" },
        { t: "üèóÔ∏è En construccion...", d: "Siempre se puede mejorar", l: "" }
      ],
      DanielSsenda2025: [
        { t: "üü® Analisis de Ventas - Report", d: "Resumen de ventas y an√°lisis (facturado)", l: "aHR0cHM6Ly9hcHAucG93ZXJiaS5jb20vdmlldz9yPWV5SnJJam9pWVRoaU4yTXdOekl0TUdNMk55MDBZV05qTFRobE16RXROVFJtWm1Fell6TXdNbVkxSWl3aWRDSTZJamt6TmpReFlqTm1MV1U1Tm1NdE5EazBPQzA0WkRJd0xUVmtNVFF6WlRaaVkyTmhPQ0o5" },
        { t: "üü® Analisis de Ventas - Toma Pedido", d: "Deteccion de estado de pedidos", l: "aHR0cHM6Ly9hcHAucG93ZXJiaS5jb20vdmlldz9yPWV5SnJJam9pT0dNd01tVTRPVGN0TURSbE1TMDBNVFprTFdJNVlURXRNbUZtTm1FNVl6QmtOVGRtSWl3aWRDSTZJamt6TmpReFlqTm1MV1U1Tm1NdE5EazBPQzA0WkRJd0xUVmtNVFF6WlRaaVkyTmhPQ0o5JnBhZ2VOYW1lPWFjY2RlNGIxZTkyNDEzYjU4Mzli" },
        { t: "üü® Control de Orden de Compra y Stock", d: "Seguimiento de OC y stock de veh√≠culos", l: "aHR0cHM6Ly9hcHAucG93ZXJiaS5jb20vdmlldz9yPWV5SnJJam9pTldNd09ETXdOR1F0WmpFMU9TMDBPR0UzTFRrNFltSXRaakZsTWpJeE1EaGpOMk5rSWl3aWRDSTZJamt6TmpReFlqTm1MV1U1Tm1NdE5EazBPQzA0WkRJd0xUVmtNVFF6WlRaaVkyTmhPQ0o5" },
        { t: "üü® Analisis de Clientes", d: "Informe de compras de clientes", l: "aHR0cHM6Ly9hcHAucG93ZXJiaS5jb20vdmlldz9yPWV5SnJJam9pTkRVMVpXSTVPVFl0TVRnMlpTMDBNVGMxTFRsaVlqSXRPREJsTjJJMk1qRTVNMkl3SWl3aWRDSTZJamt6TmpReFlqTm1MV1U1Tm1NdE5EazBPQzA0WkRJd0xUVmtNVFF6WlRaaVkyTmhPQ0o5JnBhZ2VOYW1lPTBhYzlmZGUyYmU4NzAwYzVhYjIz" },
        { t: "üü® Analisis AAP", d: "Analisis de inmatriculaciones de la Asociacion Automotriz del Peru", l: "aHR0cHM6Ly9hcHAucG93ZXJiaS5jb20vdmlldz9yPWV5SnJJam9pTnpZNE5ESXpZMll0T0RBNFlTMDBORGt3TFRrME1tRXRORGsyWlRobVpEVTROMlEzSWl3aWRDSTZJamt6TmpReFlqTm1MV1U1Tm1NdE5EazBPQzA0WkRJd0xUVmtNVFF6WlRaaVkyTmhPQ0o5" },
        { t: "üü® Analisis de ventas por Tienda", d: "Avance de ventas de Tiendas Propias", l: "aHR0cHM6Ly9hcHAucG93ZXJiaS5jb20vdmlldz9yPWV5SnJJam9pTm1FMVpEaGpaVE10TkRBMk9TMDBOak16TFRsbE1ESXROalJrWVdRM01qZGhNalV5SWl3aWRDSTZJamt6TmpReFlqTm1MV1U1Tm1NdE5EazBPQzA0WkRJd0xUVmtNVFF6WlRaaVkyTmhPQ0o5JnBhZ2VOYW1lPTY1ODVkZTI5Mjg2OTg3NWY0ODNl" },
        { t: "üü® Analisis de Comparativo de Precios", d: "VS de precios mes a mes", l: "aHR0cHM6Ly9hcHAucG93ZXJiaS5jb20vdmlldz9yPWV5SnJJam9pT1RjNU56VmxNbUV0TURReU5pMDBZalUzTFRobFltUXROamMwTnpjMU16UTVObUptSWl3aWRDSTZJamt6TmpReFlqTm1MV1U1Tm1NdE5EazBPQzA0WkRJd0xUVmtNVFF6WlRaaVkyTmhPQ0o5" },
        { t: "üü® Comisiones", d: "Comsion de Vendedores", l: "aHR0cHM6Ly9hcHAucG93ZXJiaS5jb20vdmlldz9yPWV5SnJJam9pWVRrek9ERTRPR1F0TXpGaFpTMDBabVUxTFRobVpqVXRPR013WW1abU56YzFNV0pqSWl3aWRDSTZJamt6TmpReFlqTm1MV1U1Tm1NdE5EazBPQzA0WkRJd0xUVmtNVFF6WlRaaVkyTmhPQ0o5JnBhZ2VOYW1lPWJkM2I2NjI0ZDVlZDBkOTNmZTQy" },
        { t: "üèóÔ∏è En construccion...", d: "Siempre se puede mejorar", l: "" }
      ]
    };

    // variables
    let rolActual = null;
    let linksDescifrados = [];

    // ACCEDER: comparamos la versi√≥n en base64 del input con los valores almacenados
    function acceder() {
      const usuarioInput = document.getElementById("usuario").value.trim();
      const claveInput = document.getElementById("clave").value.trim();
      const usuarioB64 = codificar(usuarioInput);
      const claveB64 = codificar(claveInput);

      let accesoConcedido = false;

      for (const u of usuariosCifrados) {
        if (usuarioB64 === u.u && claveB64 === u.p) {
          rolActual = u.rol;
          accesoConcedido = true;
          break;
        }
      }

      if (accesoConcedido) {
        mostrarMenuPorRol(rolActual);
        document.getElementById("login").style.display = "none";
        document.getElementById("menu").style.display = "block";
        document.getElementById("error").style.display = "none";

        // Aplicar la clase que hace align desde arriba y permite scroll
        document.body.classList.add('top-align');

        // Remover la clase que centraba verticalmente el login
        document.getElementById("login").classList.remove('center-vert');

        // Marcar aria-hidden correctamente
        document.getElementById("menu").setAttribute('aria-hidden', 'false');
        document.getElementById("login").setAttribute('aria-hidden', 'true');
      } else {
        document.getElementById("error").style.display = "block";
      }
    }

    // mostrar men√∫ seg√∫n rol (desciframos solo los links)
    function mostrarMenuPorRol(rol) {
      const contenedor = document.querySelector(".grid");
      contenedor.innerHTML = "";
      linksDescifrados = [];
      const dashboards = dashboardsPorRol[rol] || [];

      dashboards.forEach((d, i) => {
        const linkDescifrado = decodificar(d.l);
        linksDescifrados.push(linkDescifrado);

        const tile = document.createElement("div");
        tile.className = "tile";
        tile.onclick = () => abrirDashboard(i);
        tile.innerHTML = `<h3>${d.t}</h3><p>${d.d}</p>`;
        contenedor.appendChild(tile);
      });
    }

    function abrirDashboard(index) {
      // Si el link est√° vac√≠o, no intentar abrir iframe.
      const url = linksDescifrados[index] || "";
      if (!url) {
        alert('‚û°Ô∏è Estamos trabajando en ello.');
        return;
      }
      document.getElementById("menu").style.display = "none";
      document.getElementById("dashboard").style.display = "block";
      document.getElementById("iframe").src = url;

      // Alinear desde arriba para evitar recortes y mantener scroll
      document.body.classList.add('top-align');

      // aria attributes
      document.getElementById("menu").setAttribute('aria-hidden', 'true');
      document.getElementById("dashboard").setAttribute('aria-hidden', 'false');
    }

    function volverMenu() {
      document.getElementById("iframe").src = "";
      document.getElementById("dashboard").style.display = "none";
      document.getElementById("menu").style.display = "block";

      // Mantener top-align mientras estemos en el menu (evita recortes)
      document.body.classList.add('top-align');

      // aria attributes
      document.getElementById("dashboard").setAttribute('aria-hidden', 'true');
      document.getElementById("menu").setAttribute('aria-hidden', 'false');
    }

    // (opcional) cerrar sesion que vuelve al login centrado
    function cerrarSesion() {
      document.getElementById("menu").style.display = "none";
      document.getElementById("dashboard").style.display = "none";
      document.getElementById("login").style.display = "block";
      document.getElementById("login").classList.add('center-vert');
      document.body.classList.remove('top-align');

      // aria attrs
      document.getElementById("login").setAttribute('aria-hidden', 'false');
      document.getElementById("menu").setAttribute('aria-hidden', 'true');
      document.getElementById("dashboard").setAttribute('aria-hidden', 'true');
    }

    // Asegurar estado inicial del layout
    window.addEventListener('load', () => {
      // login centrado inicialmente
      document.getElementById("login").classList.add('center-vert');
      document.body.classList.remove('top-align');

      // aria initial
      document.getElementById("login").setAttribute('aria-hidden', 'false');
      document.getElementById("menu").setAttribute('aria-hidden', 'true');
      document.getElementById("dashboard").setAttribute('aria-hidden', 'true');
    });
  </script>

</body>
</html>


















