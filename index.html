<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Panel Power BI - Acceso Privado</title>
  <style>
    body {
      font-family: "Segoe UI", Arial, sans-serif;
      background-image: url('https://media.bio.site/sites/a7cf8165-3ba2-478a-8108-f98fac889c65/iX4kWJuDwXhgEBQ3a7GEHg.jpg');
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
      margin: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      color: #333;
    }

    /* Fondo difuminado para formularios y paneles */
    .card, #menu, #dashboard {
      background: rgba(255, 255, 255, 0.93);
      backdrop-filter: blur(4px);
      border-radius: 15px;
      box-shadow: 0 0 15px rgba(0,0,0,0.3);
      padding: 30px;
      text-align: center;
      animation: fadeIn 0.6s ease-in-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.96); }
      to { opacity: 1; transform: scale(1); }
    }

    .card {
      width: 320px;
    }

    input {
      width: 90%;
      padding: 10px;
      margin: 8px 0;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 1em;
    }

    button {
      background: #D9B300;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
      transition: 0.3s;
    }

    button:hover {
      background: #b89c00;
      transform: scale(1.03);
    }

    #menu, #dashboard {
      display: none;
      width: 90%;
      max-width: 1100px;
    }

    h2 {
      color: #D9B300;
      margin-bottom: 15px;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 30px;
    }

    .tile {
      background: white;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 0 8px rgba(0,0,0,0.1);
      transition: transform 0.2s;
      cursor: pointer;
    }

    .tile:hover {
      transform: scale(1.03);
      background: #fffbe6;
    }

    iframe {
      width: 100%;
      height: 80vh;
      border: none;
      border-radius: 12px;
      box-shadow: 0 0 8px rgba(0,0,0,0.2);
    }

    .back-btn {
      background: #555;
      margin-top: 15px;
    }

    .back-btn:hover {
      background: #333;
    }
  </style>
</head>
<body>

  <!-- LOGIN -->
  <div id="login" class="card">
    <h2>Acceso Privado</h2>
    <p>Ingrese sus credenciales</p>
    <input type="text" id="usuario" placeholder="Usuario">
    <input type="password" id="clave" placeholder="Contraseña">
    <br>
    <button onclick="acceder()">Ingresar</button>
    <p id="error" style="color:red; display:none;">Usuario o contraseña incorrectos</p>
  </div>

  <!-- MENÚ PRINCIPAL -->
  <div id="menu">
    <h2>Panel de Power BI</h2>
    <div class="grid"></div>
  </div>

  <!-- DASHBOARD -->
  <div id="dashboard">
    <iframe id="iframe"></iframe>
    <br>
    <button class="back-btn" onclick="volverMenu()">⬅ Volver al menú</button>
  </div>

  <script>
    // --- FUNCIONES DE SEGURIDAD ---
    function decodificar(texto) { return atob(texto); }

    // --- USUARIOS Y CONTRASEÑAS CIFRADAS ---
    const usuariosCifrados = [
      { u: "YWRtaW4=", p: "U1NlbmRhMjAyNQ==", rol: "admin" },       // admin : SSenda2025
      { u: "Y29tZXJjaWFs", p: "VmVudGFzMjAyNQ==", rol: "comercial" }, // comercial : Ventas2025
      { u: "bWFya2V0aW5n", p: "Q29tZXJjaWFsTWF4", rol: "marketing" }, // marketing : ComercialMax
      { u: "YW5hbHl0aWNv", p: "QmlQYW5lbDIwMjU=", rol: "analitico" }, // analitico : BiPanel2025
      { u: "Z2VzdGlvbg==", p: "U2VuZGEyMDEw", rol: "gestion" }        // gestion : Senda2010
    ];

    // --- DASHBOARDS CIFRADOS (por rol) ---
    const dashboardsPorRol = {
      admin: [
        { t: "Ventas Comerciales - Report", d: "Resumen de ventas y análisis (facturado)", l: "aHR0cHM6Ly9hcHAucG93ZXJiaS5jb20vdmlldz9yPWV5SnJJam9pWVRoaU4yTXdOekl0TUdNMk55MDBZV05qTFRobE16RXROVFJtWm1Fell6TXdNbVkxSWl3aWRDSTZJamt6TmpReFlqTm1MV1U1Tm1NdE5EazBPQzA0WkRJd0xUVmtNVFF6WlRaaVkyTmhPQ0o5" },
        { t: "Control de OC y Stock", d: "Seguimiento de OC y stock de vehículos", l: "aHR0cHM6Ly9hcHAucG93ZXJiaS5jb20vdmlldz9yPWV5SnJJam9pTldNd09ETXdOR1F0WmpFMU9TMDBPR0UzTFRrNFltSXRaakZsTWpJeE1EaGpOMk5rSWl3aWRDSTZJamt6TmpReFlqTm1MV1U1Tm1NdE5EazBPQzA0WkRJd0xUVmtNVFF6WlRaaVkyTmhPQ0o5" },
        { t: "Comparativo de Precios", d: "VS de precios mes a mes", l: "aHR0cHM6Ly9hcHAucG93ZXJiaS5jb20vdmlldz9yPWV5SnJJam9pT1RjNU56VmxNbUV0TURReU5pMDBZalUzTFRobFltUXROamMwTnpjMU16UTVObUptSWl3aWRDSTZJamt6TmpReFlqTm1MV1U1Tm1NdE5EazBPQzA0WkRJd0xUVmtNVFF6WlRaaVkyTmhPQ0o5" }
      ],
      comercial: [
        { t: "Ventas Comerciales - Report", d: "Resumen de ventas y análisis (facturado)", l: "aHR0cHM6Ly9hcHAucG93ZXJiaS5jb20vdmlldz9yPWV5SnJJam9pWVRoaU4yTXdOekl0TUdNMk55MDBZV05qTFRobE16RXROVFJtWm1Fell6TXdNbVkxSWl3aWRDSTZJamt6TmpReFlqTm1MV1U1Tm1NdE5EazBPQzA0WkRJd0xUVmtNVFF6WlRaaVkyTmhPQ0o5" },
        { t: "Avance de Ventas", d: "Avance de ventas en soles y unidades", l: "aHR0cHM6Ly9hcHAucG93ZXJiaS5jb20vdmlldz9yPWV5SnJJam9pTm1FMVpEaGpaVE10TkRBMk9TMDBOak16TFRsbE1ESXROalJrWVdRM01qZGhNalV5SWl3aWRDSTZJamt6TmpReFlqTm1MV1U1Tm1NdE5EazBPQzA0WkRJd0xUVmtNVFF6WlRaaVkyTmhPQ0o5" }
      ],
      marketing: [
        { t: "Informe de AAP", d: "Análisis de competencia y margen del AAP", l: "aHR0cHM6Ly9hcHAucG93ZXJiaS5jb20vdmlldz9yPWV5SnJJam9pTnpZNE5ESXpZMll0T0RBNFlTMDBORGt3TFRrME1tRXRORGsyWlRobVpEVTROMlEzSWl3aWRDSTZJamt6TmpReFlqTm1MV1U1Tm1NdE5EazBPQzA0WkRJd0xUVmtNVFF6WlRaaVkyTmhPQ0o5" },
        { t: "Comparativo de Precios", d: "VS de precios mes a mes", l: "aHR0cHM6Ly9hcHAucG93ZXJiaS5jb20vdmlldz9yPWV5SnJJam9pT1RjNU56VmxNbUV0TURReU5pMDBZalUzTFRobFltUXROamMwTnpjMU16UTVObUptSWl3aWRDSTZJamt6TmpReFlqTm1MV1U1Tm1NdE5EazBPQzA0WkRJd0xUVmtNVFF6WlRaaVkyTmhPQ0o5" }
      ],
      analitico: [
        { t: "Análisis de Clientes", d: "Detalle de compra de clientes", l: "aHR0cHM6Ly9hcHAucG93ZXJiaS5jb20vdmlldz9yPWV5SnJJam9pTkRVMVpXSTVPVFl0TVRnMlpTMDBNVGMxTFRsaVlqSXRPREJsTjJJMk1qRTVNMkl3SWl3aWRDSTZJamt6TmpReFlqTm1MV1U1Tm1NdE5EazBPQzA0WkRJd0xUVmtNVFF6WlRaaVkyTmhPQ0o5" }
      ],
      gestion: [
        { t: "Control de OC y Stock", d: "Seguimiento de OC y stock de vehículos", l: "aHR0cHM6Ly9hcHAucG93ZXJiaS5jb20vdmlldz9yPWV5SnJJam9pTldNd09ETXdOR1F0WmpFMU9TMDBPR0UzTFRrNFltSXRaakZsTWpJeE1EaGpOMk5rSWl3aWRDSTZJamt6TmpReFlqTm1MV1U1Tm1NdE5EazBPQzA0WkRJd0xUVmtNVFF6WlRaaVkyTmhPQ0o5" }
      ]
    };

    let rolActual = null;
    let linksDescifrados = [];

    function acceder() {
      const usuario = document.getElementById("usuario").value.trim();
      const clave = document.getElementById("clave").value.trim();
      let accesoConcedido = false;

      for (const u of usuariosCifrados) {
        if (usuario === decodificar(u.u) && clave === decodificar(u.p)) {
          rolActual = u.rol;
          accesoConcedido = true;
          break;
        }
      }

      if (accesoConcedido) {
        mostrarMenuPorRol(rolActual);
        document.getElementById("login").style.display = "none";
        document.getElementById("menu").style.display = "block";
      } else {
        document.getElementById("error").style.display = "block";
      }
    }

    function mostrarMenuPorRol(rol) {
      const contenedor = document.querySelector(".grid");
      contenedor.innerHTML = "";
      linksDescifrados = [];
      const dashboards = dashboardsPorRol[rol] || [];

      dashboards.forEach((d, i) => {
        const linkDescifrado = decodificar(d.l);
        linksDescifrados.push(linkDescifrado);

        const tile = document.createElement("div");
        tile.className = "tile";
        tile.onclick = () => abrirDashboard(i);
        tile.innerHTML = `<h3 style="color:#D9B300;">${d.t}</h3><p>${d.d}</p>`;
        contenedor.appendChild(tile);
      });
    }

    function abrirDashboard(index) {
      document.getElementById("menu").style.display = "none";
      document.getElementById("dashboard").style.display = "block";
      document.getElementById("iframe").src = linksDescifrados[index];
    }

    function volverMenu() {
      document.getElementById("iframe").src = "";
      document.getElementById("dashboard").style.display = "none";
      document.getElementById("menu").style.display = "block";
    }
  </script>

</body>
</html>

